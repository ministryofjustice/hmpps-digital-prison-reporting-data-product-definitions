{
  "id": "klebazYABwG5XAsA5N0AISgWcQA",
  "name": "ORS Transfer Holds Report",
  "description": "MOV0040 - v00.00.01 Last Modified: 29/07/2016\nThe report returns a list of all prisoners in a single establishment who have active hold alerts. i.e. Accredited programme hold, Allocation hold, Governors hold, Medical hold, Parole review hold or Security hold.  The reports also displays the user id of the member of staff who entered the alert.\n ",
  "metadata": {
    "version": "1.0.0",
    "tags": ["MOV0040 v00.00.01 DPR"]
  },
  "datasource": [
    {
      "id": "nomis",
      "name": "nomis",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "nomis"
    }
  ],
  "dataset": [
    {
      "id": "3377299/DP3",
      "name": "Alerts",
      "description": "The purpose of the OR Demographics universe is to provide core reporting on Prisoner and Establishment data.                                                       DPD is the code of this universe.                                                                  Universe created on 15th June 2006 based on C-NOMIS SR8. ",
      "datasource": "nomis",
      "query": "SELECT DISTINCT AT_OFFENDER.OFFENDER_ID_DISPLAY, AT_OFFENDER.LAST_NAME, AT_OFFENDER.FIRST_NAME, AT_OFFENDER.BIRTH_DATE, substr(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION,length(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID)+2,length(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)), AT_ALERT_TYPE_DESC.DESCRIPTION, AT_OFFENDER_ALERTS.ALERT_DATE, AT_OFFENDER_ALERTS.EXPIRY_DATE, AT_OFFENDER_ALERTS.COMMENT_TEXT, AT_OFFENDER_ALERTS.CREATE_USER_ID FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES AT_ALERT_TYPE_DESC, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.LIVING_UNITS AT_ALL_LIVING_UNITS WHERE ( AT_OFFENDER.OFFENDER_ID=AT_OFFENDER_BOOKING.OFFENDER_ID ) AND ( AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID(+)=AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID ) AND ( AT_OFFENDER_BOOKING.LIVING_UNIT_ID=AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID ) AND ( AT_ALERT_TYPE_DESC.CODE(+)=AT_OFFENDER_ALERTS.ALERT_CODE ) AND ( AT_ALERT_TYPE_DESC.DOMAIN='ALERT_CODE' OR AT_ALERT_TYPE_DESC.DOMAIN IS NULL ) AND ( AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE='INST' ) AND ( AT_OFFENDER_BOOKING.LIVING_UNIT_ID(+)=AT_ALL_LIVING_UNITS.LIVING_UNIT_ID ) AND ( AT_CASELOAD_LOCATIONS.AGY_LOC_ID=AT_OFFENDER_BOOKING.AGY_LOC_ID ) AND ( AT_CASELOAD_LOCATIONS.AGY_LOC_ID=AT_OFFENDERS_LOCATIONS.AGY_LOC_ID(+) ) AND ( AT_CASELOAD_LOCATIONS.AGY_LOC_ID NOT IN ('OUT','TRN') AND AT_CASELOAD_LOCATIONS.CASELOAD_ID NOT IN ('ADMINC', 'CADM_I','MULTI') ) AND ( AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID=AT_WING_ESTABLISHMENT.AGY_LOC_ID ) AND ( AT_WING_ESTABLISHMENT.AGY_LOC_ID=WING_CASELOAD_SECURITY.CASELOAD_ID ) AND ( WING_CASELOAD_SECURITY.USERNAME=UPPER('WQB43L') ) AND ( ( AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = 'KMI' ) AND AT_ALERT_TYPE_DESC.DESCRIPTION IN ( 'Accredited Programme hold','Allocation Hold','Medical Hold','Parole Review Hold','Security Hold','Governor''s Hold','Do not transfer to CPA named in comments' ) AND ( AT_ALL_LIVING_UNITS.AGY_LOC_ID||'-'||AT_ALL_LIVING_UNITS.LEVEL_1_CODE IN ('All') or 'All' in ('All') ) AND ( AT_OFFENDER_BOOKING.ACTIVE_FLAG='Y' ) AND AT_OFFENDER_BOOKING.IN_OUT_STATUS <> 'TRN' AND ( AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' ) )",
      "schema": {
        "field": [
          {
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "description": "DP3.DO44"
          },
          {
            "name": "LAST_NAME",
            "type": "string",
            "display": "Last Name",
            "description": "DP3.DO45"
          },
          {
            "name": "FIRST_NAME",
            "type": "string",
            "display": "First Name",
            "description": "DP3.DO46"
          },
          {
            "name": "BIRTH_DATE",
            "type": "string",
            "display": "Date of Birth",
            "description": "DP3.DO75"
          },
          {
            "name": "a",
            "type": "string",
            "display": "Unit Description 4 Short",
            "description": "DP3.DO427"
          },
          {
            "name": "DESCRIPTION",
            "type": "string",
            "display": "Alert Description",
            "description": "DP3.DO97"
          },
          {
            "name": "ALERT_DATE",
            "type": "string",
            "display": "Alert Effective Date",
            "description": "DP3.DO59e"
          },
          {
            "name": "EXPIRY_DATE",
            "type": "string",
            "display": "Expiry Date",
            "description": "DP3.DO82"
          },
          {
            "name": "COMMENT_TEXT",
            "type": "string",
            "display": "Alert Comment Text",
            "description": "DP3.DO10eb"
          },
          {
            "name": "CREATE_USER_ID",
            "type": "string",
            "display": "Alert Create User Id (see Description)",
            "description": "DP3.DO1102"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "caseload",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": []
        }
      ]
    }
  ],
  "report": [
    {
      "id": "162991.RS",
      "name": "By Surname",
      "description": "",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP3",
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:BIRTH_DATE",
            "display": "Date of Birth",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:a",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "Alert Description",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:COMMENT_TEXT",
            "display": "Alert Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:ALERT_DATE",
            "display": "Alert Effective Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:EXPIRY_DATE",
            "display": "Expiry Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:CREATE_USER_ID",
            "display": "Alert Create User Id (see Description)",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "163779.RS",
      "name": "By Alert Description",
      "description": "",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP3",
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:BIRTH_DATE",
            "display": "Date of Birth",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:a",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "Alert Description",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:COMMENT_TEXT",
            "display": "Alert Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:ALERT_DATE",
            "display": "Alert Effective Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:EXPIRY_DATE",
            "display": "Expiry Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:CREATE_USER_ID",
            "display": "Alert Create User Id (see Description)",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "163829.RS",
      "name": "By Alert Effective Date",
      "description": "",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP3",
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:BIRTH_DATE",
            "display": "Date of Birth",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:a",
            "display": "Unit Description 4 Short",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "Alert Description",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:COMMENT_TEXT",
            "display": "Alert Comment Text",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:ALERT_DATE",
            "display": "Alert Effective Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:EXPIRY_DATE",
            "display": "Expiry Date",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:CREATE_USER_ID",
            "display": "Alert Create User Id (see Description)",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    }
  ]
}
