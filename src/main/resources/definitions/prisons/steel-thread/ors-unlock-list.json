{
  "id": "oksPorIAA_prYmgAMv_EcEP6Sx4",
  "name": "ORS Unlock List",
  "description": "Prisoners in a wing who are to be unlocked on a specified date for any of the following scheduled internal and external 'movements': Adjudication Hearings, Appointments, Activities, Visits, Court Appearances, Temporary Absence/Home Leave, Approved and Confirmed Transfers, Confirmed Releases. The data is presented over several tabs.<br />MOV0016 v00.01.04 Last Modified: 03/08/11",
  "metadata": {
    "version": "1.0.0",
    "tags": ["MOV0016 v00.01.04 DPR LSRIT039"]
  },
  "datasource": [
    {
      "id": "nomis",
      "name": "NOMIS",
      "database": "DIGITAL_PRISON_REPORTING",
      "catalog": "nomis"
    }
  ],
  "dataset": [
    {
      "id": "3377299/DP7",
      "name": "Unlock List",
      "description": "Demographic",
      "datasource": "nomis",
      "query": "dataset_base_ AS (SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, 'Activity' AS SA_EVENT_TYPE, AT_ACTY_INTLOC.DESCRIPTION AS DESCRIPTION, DT_ACT_SCHEDULE.START_TIME AS START_TIME, DT_ACT_SCHEDULE.END_TIME AS END_TIME, TO_CHAR(AT_OFF_COURSE_EVENTS.START_TIME, 'AM') AS SA_SLOT, 'Internal Movement' AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, AT_OFF_COURSE_EVENTS.DESCRIPTION AS SA_ACTIVITY_DESC_ FROM (SELECT crs_sch_id, crs_acty_id, schedule_date, start_time, end_time, TO_CHAR(start_time, 'HH24:MI') AS ALT_START, TO_CHAR(end_time, 'HH24:MI') AS ALT_END, session_no, catch_up_crs_sch_id, slot_category_code FROM oms_owner.course_schedules WHERE catch_up_crs_sch_id IS NULL) DT_ACT_SCHEDULE, OMS_OWNER.V_OFFENDER_COURSE_EVENTS_2 AT_OFF_COURSE_EVENTS, OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_ACTY_INTLOC, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_ACTY_ESTAB, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (AT_ACTY_ESTAB.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFF_COURSE_EVENTS.CRS_SCH_ID = DT_ACT_SCHEDULE.CRS_SCH_ID) AND (AT_OFF_COURSE_EVENTS.CRS_ACTY_ID = DT_ACT_SCHEDULE.CRS_ACTY_ID) AND (AT_OFF_COURSE_EVENTS.TO_INTERNAL_LOCATION_ID = AT_ACTY_INTLOC.INTERNAL_LOCATION_ID (+)) AND (AT_OFF_COURSE_EVENTS.AGY_LOC_ID = AT_ACTY_ESTAB.AGY_LOC_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFF_COURSE_EVENTS.OFFENDER_BOOK_ID) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFF_COURSE_EVENTS.EVENT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled Activities\\SA Activity Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFF_COURSE_EVENTS.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP) AND (AT_ACTY_ESTAB.AGENCY_LOCATION_TYPE = 'INST' AND AT_ACTY_ESTAB.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Scheduled Activities\\SA Estab Code',mono,free,,Not_Persistent,,User:2) */))) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, 'Court' AS SA_EVENT_TYPE, AT_DESTINATION_COURT.DESCRIPTION AS DESCRIPTION, AT_COURT_EVENT_MVMTS.START_TIME AS START_TIME, AT_COURT_EVENT_MVMTS.END_TIME AS END_TIME, TO_CHAR(AT_COURT_EVENT_MVMTS.START_TIME, 'AM') AS SA_SLOT, 'External Movement' AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, CourtMovementReason.DESCRIPTION AS SA_ACTIVITY_DESC_ FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES CourtMovementReason, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_DESTINATION_COURT, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.COURT_EVENTS AT_COURT_EVENT_MVMTS, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (CourtMovementReason.PARENT_CODE = 'CRT') AND (CourtMovementReason.DOMAIN = 'MOVE_RSN') AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_COURT_EVENT_MVMTS.OFFENDER_BOOK_ID) AND (AT_COURT_EVENT_MVMTS.COURT_EVENT_TYPE = CourtMovementReason.CODE) AND (AT_COURT_EVENT_MVMTS.AGY_LOC_ID = AT_DESTINATION_COURT.AGY_LOC_ID) AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_COURT_EVENT_MVMTS.EVENT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled Court Events\\Court Event Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_COURT_EVENT_MVMTS.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP) AND AT_COURT_EVENT_MVMTS.EVENT_STATUS = 'SCH') UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, 'Hearing' AS SA_EVENT_TYPE, AT_HEARING_LOC.DESCRIPTION AS DESCRIPTION, AT_OIC_HEARINGS.HEARING_TIME AS START_TIME, TO_DATE('01/01/4999', 'dd/mm/yyyy') AS END_TIME, TO_CHAR(AT_OIC_HEARINGS.HEARING_TIME, 'AM') AS SA_SLOT, 'Internal Movement' AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, CASE WHEN AT_OIC_HEARINGS.OIC_HEARING_TYPE = 'GOV_ADULT' THEN 'Governor Hearing Adult' WHEN AT_OIC_HEARINGS.OIC_HEARING_TYPE = 'GOV_YOI' THEN 'Governor Hearing YOI' WHEN AT_OIC_HEARINGS.OIC_HEARING_TYPE = 'INAD_ADULT' THEN 'Independent Adjudicator Hearing Adult' WHEN AT_OIC_HEARINGS.OIC_HEARING_TYPE = 'INAD_YOI' THEN 'Independent Adjudicator Hearing YOI' ELSE AT_OIC_HEARINGS.OIC_HEARING_TYPE END AS SA_ACTIVITY_DESC_ FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_ACTY_ESTAB2, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_HEARING_LOC, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.OIC_HEARINGS AT_OIC_HEARINGS, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS, OMS_OWNER.V_OIC_INCIDENTS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = OMS_OWNER.V_OIC_INCIDENTS.OFFENDER_BOOK_ID) AND (AT_OIC_HEARINGS.INTERNAL_LOCATION_ID = AT_HEARING_LOC.INTERNAL_LOCATION_ID) AND (AT_HEARING_LOC.AGY_LOC_ID = AT_ACTY_ESTAB2.AGY_LOC_ID) AND (AT_ACTY_ESTAB2.AGENCY_LOCATION_TYPE = 'INST') AND (OMS_OWNER.V_OIC_INCIDENTS.OIC_INCIDENT_ID = AT_OIC_HEARINGS.OIC_INCIDENT_ID) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND TO_DATE(TO_CHAR(TRUNC(AT_OIC_HEARINGS.HEARING_TIME), 'dd/mm/yyyy'), 'dd/mm/yyyy') = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled Hearings\\Scheduled Hearing Date',Mono,Free,Persistent,,User:0) */) AND TO_DATE(TO_CHAR(TRUNC(AT_OIC_HEARINGS.HEARING_TIME), 'dd/mm/yyyy'), 'dd/mm/yyyy') >= TRUNC(CURRENT_TIMESTAMP) AND AT_ACTY_ESTAB2.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #prompt('Establishment Code','A','Scheduled Hearings\\Sch Hearing Location Estab Code',Mono,Free,Not_Persistent,,User:1) */)) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, 'Release' AS SA_EVENT_TYPE, '- ' AS DESCRIPTION, TO_DATE('01/01/4999', 'dd/mm/yyyy') AS START_TIME, TO_DATE('01/01/4999', 'dd/mm/yyyy') AS END_TIME, 'AM' AS SA_SLOT, 'External Movement' AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, AT_RELEASE_REASON.DESCRIPTION AS SA_ACTIVITY_DESC_ FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES AT_RELEASE_REASON, OMS_OWNER.OFFENDER_SENT_CALCULATIONS AT_OFFENDER_SENT_CALCULATIONS, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS, OMS_OWNER.OFFENDER_RELEASE_DETAILS AT_OFFENDER_RELEASE_DETAILS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_BOOK_ID (+)) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_RELEASE_DETAILS.OFFENDER_BOOK_ID (+)) AND (AT_OFFENDER_RELEASE_DETAILS.MOVEMENT_REASON_CODE = AT_RELEASE_REASON.CODE (+)) AND (AT_RELEASE_REASON.DOMAIN (+) = 'MOVE_RSN') AND (AT_RELEASE_REASON.PARENT_CODE (+) = 'REL') AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFFENDER_RELEASE_DETAILS.RELEASE_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled Releases\\Release Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFFENDER_RELEASE_DETAILS.RELEASE_DATE >= TRUNC(CURRENT_TIMESTAMP) AND (AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_SENT_CALCULATION_ID = (SELECT MAX(A.OFFENDER_SENT_CALCULATION_ID) FROM OMS_OWNER.OFFENDER_SENT_CALCULATIONS A WHERE AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_BOOK_ID = A.OFFENDER_BOOK_ID) OR AT_OFFENDER_SENT_CALCULATIONS.OFFENDER_BOOK_ID IS NULL /* END Filter: Hierarchies/Sentence/Sentence Dates/Other Sentence Dates/''Latest Calculation Date'' */) /* START Filter: Hierarchies/Sentence/Sentence Dates/Other Sentence Dates/''Latest Calculation Date'' */) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, 'Visit' AS SA_EVENT_TYPE, AT_VISIT_LOCATION.DESCRIPTION AS DESCRIPTION, AT_OFFENDER_VISITS.START_TIME AS START_TIME, AT_OFFENDER_VISITS.END_TIME AS END_TIME, TO_CHAR(AT_OFFENDER_VISITS.START_TIME, 'AM') AS SA_SLOT, 'Internal Movement' AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, CASE WHEN AT_OFFENDER_VISITS.VISIT_TYPE = 'SCON' THEN 'Social Contact' WHEN AT_OFFENDER_VISITS.VISIT_TYPE = 'OFFI' THEN 'Official Visit' ELSE AT_OFFENDER_VISITS.VISIT_TYPE END AS SA_ACTIVITY_DESC_ FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_VISIT_LOCATION, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.OFFENDER_VISITS AT_OFFENDER_VISITS, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_VISITS.OFFENDER_BOOK_ID) AND (AT_OFFENDER_VISITS.VISIT_INTERNAL_LOCATION_ID = AT_VISIT_LOCATION.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_VISITS.VISIT_STATUS = 'SCH') AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFFENDER_VISITS.VISIT_STATUS = 'SCH' AND AT_OFFENDER_VISITS.VISIT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled Visits\\Scheduled Visit Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFFENDER_VISITS.VISIT_DATE >= TRUNC(CURRENT_TIMESTAMP)) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE AS SA_EVENT_TYPE, CASE WHEN NOT AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL THEN AT_AGENCY_LOCATIONS_SCH_TO.DESCRIPTION WHEN AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL AND NOT AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID IS NULL AND DT_ROTL_ADDRESS_USAGE.ADDRESS_USAGE = 'ROTL' THEN CASE WHEN (ROTL_ADDRESSES.FLAT) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.FLAT) END || ' ' || CASE WHEN (ROTL_ADDRESSES.PREMISE) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.PREMISE) || ' ' END || CASE WHEN (ROTL_ADDRESSES.STREET) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.STREET) || ' ' END WHEN AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL AND AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID IS NULL THEN 'No Location' ELSE AT_CORPORATES.CORPORATE_NAME END AS DESCRIPTION, AT_OFFENDER_IND_SCHEDULES.START_TIME AS START_TIME, AT_OFFENDER_IND_SCHEDULES.RETURN_TIME AS END_TIME, TO_CHAR(AT_OFFENDER_IND_SCHEDULES.START_TIME, 'AM') AS SA_SLOT, CASE WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'APP' THEN 'Internal Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TRN' THEN 'External Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TAP' THEN 'External Movement' ELSE '' END AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, ScheduledMovementReason.DESCRIPTION AS SA_ACTIVITY_DESC_ FROM ADDRESSES ROTL_ADDRESSES, OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.OFFENDER_IND_SCHEDULES AT_OFFENDER_IND_SCHEDULES, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES ScheduledMovementReason, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_TO, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_FROM2, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_FROM, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.CORPORATES AT_CORPORATES, (SELECT * FROM ADDRESS_USAGES WHERE ADDRESS_USAGE = 'ROTL') DT_ROTL_ADDRESS_USAGE, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS, V_CORPORATE_ADDRESSES AT_V_CORPORATE_ADDRESSES, ADDRESSES AT_CORPORATE_ADDRESSES WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_IND_SCHEDULES.OFFENDER_BOOK_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFFENDER_IND_SCHEDULES.EVENT_SUB_TYPE = ScheduledMovementReason.CODE) AND (ScheduledMovementReason.DOMAIN = 'MOVE_RSN') AND (AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_TO.AGY_LOC_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_FROM.AGY_LOC_ID (+)) AND (AT_AGENCY_LOCATIONS_SCH_FROM2.AGENCY_LOCATION_TYPE = 'INST') AND (AT_CORPORATE_ADDRESSES.ADDRESS_ID = AT_V_CORPORATE_ADDRESSES.ADDRESS_ID (+)) AND (AT_V_CORPORATE_ADDRESSES.CORPORATE_ID = AT_CORPORATES.CORPORATE_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = AT_CORPORATE_ADDRESSES.ADDRESS_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = ROTL_ADDRESSES.ADDRESS_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = DT_ROTL_ADDRESS_USAGE.ADDRESS_ID (+)) AND (AT_AGENCY_LOCATIONS_SCH_FROM.AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_FROM2.AGY_LOC_ID) AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFFENDER_IND_SCHEDULES.DIRECTION_CODE = 'OUT' AND AT_OFFENDER_IND_SCHEDULES.EVENT_STATUS = 'SCH' AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled TAPS, Transfers and Appointments\\Event Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP) AND AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TAP' AND AT_OFFENDER_IND_SCHEDULES.EVENT_CLASS = 'EXT_MOV' AND (AT_AGENCY_LOCATIONS_SCH_FROM2.AGENCY_LOCATION_TYPE = 'INST' AND AT_AGENCY_LOCATIONS_SCH_FROM2.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Scheduled TAPS, Transfers and Appointments\\Scheduled Departure Establishment Code',mono,free,,Not_Persistent,,User:2) */))) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE AS SA_EVENT_TYPE, CASE WHEN NOT AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL THEN AT_AGENCY_LOCATIONS_SCH_TO.DESCRIPTION WHEN AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL AND NOT AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID IS NULL AND DT_ROTL_ADDRESS_USAGE.ADDRESS_USAGE = 'ROTL' THEN CASE WHEN (ROTL_ADDRESSES.FLAT) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.FLAT) END || ' ' || CASE WHEN (ROTL_ADDRESSES.PREMISE) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.PREMISE) || ' ' END || CASE WHEN (ROTL_ADDRESSES.STREET) IS NULL THEN NULL ELSE (ROTL_ADDRESSES.STREET) || ' ' END WHEN AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID IS NULL AND AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID IS NULL THEN 'No Location' ELSE AT_CORPORATES.CORPORATE_NAME END AS DESCRIPTION, AT_OFFENDER_IND_SCHEDULES.START_TIME AS START_TIME, AT_OFFENDER_IND_SCHEDULES.RETURN_TIME AS END_TIME, TO_CHAR(AT_OFFENDER_IND_SCHEDULES.START_TIME, 'AM') AS SA_SLOT, CASE WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'APP' THEN 'Internal Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TRN' THEN 'External Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TAP' THEN 'External Movement' ELSE '' END AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, ScheduledMovementReason.DESCRIPTION AS SA_ACTIVITY_DESC_ FROM ADDRESSES ROTL_ADDRESSES, OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.OFFENDER_IND_SCHEDULES AT_OFFENDER_IND_SCHEDULES, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.REFERENCE_CODES ScheduledMovementReason, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_TO, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_FROM2, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.AGENCY_LOCATIONS AT_AGENCY_LOCATIONS_SCH_FROM, OFFENDER_IND_SCH_WAIT_LISTS AT_OFFENDER_IND_SCH_WAIT_LISTS, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.CORPORATES AT_CORPORATES, (SELECT * FROM ADDRESS_USAGES WHERE ADDRESS_USAGE = 'ROTL') DT_ROTL_ADDRESS_USAGE, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS, V_CORPORATE_ADDRESSES AT_V_CORPORATE_ADDRESSES, ADDRESSES AT_CORPORATE_ADDRESSES WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_IND_SCHEDULES.OFFENDER_BOOK_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFFENDER_IND_SCHEDULES.EVENT_SUB_TYPE = ScheduledMovementReason.CODE) AND (ScheduledMovementReason.DOMAIN = 'MOVE_RSN') AND (AT_OFFENDER_IND_SCHEDULES.TO_AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_TO.AGY_LOC_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_FROM.AGY_LOC_ID (+)) AND (AT_AGENCY_LOCATIONS_SCH_FROM2.AGENCY_LOCATION_TYPE = 'INST') AND (AT_CORPORATE_ADDRESSES.ADDRESS_ID = AT_V_CORPORATE_ADDRESSES.ADDRESS_ID (+)) AND (AT_V_CORPORATE_ADDRESSES.CORPORATE_ID = AT_CORPORATES.CORPORATE_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = AT_CORPORATE_ADDRESSES.ADDRESS_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = ROTL_ADDRESSES.ADDRESS_ID (+)) AND (AT_OFFENDER_IND_SCHEDULES.TO_ADDRESS_ID = DT_ROTL_ADDRESS_USAGE.ADDRESS_ID (+)) AND (AT_AGENCY_LOCATIONS_SCH_FROM.AGY_LOC_ID = AT_AGENCY_LOCATIONS_SCH_FROM2.AGY_LOC_ID) AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_OFFENDER_IND_SCH_WAIT_LISTS.EVENT_ID = AT_OFFENDER_IND_SCHEDULES.EVENT_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TRN' AND AT_OFFENDER_IND_SCHEDULES.EVENT_CLASS = 'EXT_MOV' AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled TAPS, Transfers and Appointments\\Event Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP) AND AT_OFFENDER_IND_SCHEDULES.EVENT_STATUS = 'SCH' AND AT_OFFENDER_IND_SCHEDULES.DIRECTION_CODE = 'OUT' AND AT_OFFENDER_IND_SCH_WAIT_LISTS.APPROVED_FLAG = 'Y' AND AT_OFFENDER_IND_SCH_WAIT_LISTS.WAIT_LIST_STATUS = 'CON' AND (AT_AGENCY_LOCATIONS_SCH_FROM2.AGENCY_LOCATION_TYPE = 'INST' AND AT_AGENCY_LOCATIONS_SCH_FROM2.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Scheduled TAPS, Transfers and Appointments\\Scheduled Departure Establishment Code',mono,free,,Not_Persistent,,User:2) */))) UNION SELECT AT_OFFENDER.LAST_NAME AS LAST_NAME, AT_OFFENDER.OFFENDER_ID_DISPLAY AS OFFENDER_ID_DISPLAY, AT_OFFENDER.FIRST_NAME AS FIRST_NAME, AT_HEADER_BLOCK.STATUS_2 AS STATUS_2, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) = 0 THEN NULL ELSE SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) + 1, CASE WHEN INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) = 0 THEN LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION) ELSE INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 2) - INSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, '-', 1, 1) END - 1) END AS UNIT_CODE_1, SUBSTR(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID) + 2, LENGTH(AT_AGENCY_INTERNAL_LOCATION_L4.DESCRIPTION)) AS UNIT_DESCRIPTION_4_SHORT, AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE AS SA_EVENT_TYPE, AT_INTERNAL_LOCATIONS_MVTS.DESCRIPTION AS DESCRIPTION, AT_OFFENDER_IND_SCHEDULES.START_TIME AS START_TIME, AT_OFFENDER_IND_SCHEDULES.END_TIME AS END_TIME, TO_CHAR(AT_OFFENDER_IND_SCHEDULES.START_TIME, 'AM') AS SA_SLOT, CASE WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'APP' THEN 'Internal Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TRN' THEN 'External Movement' WHEN AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'TAP' THEN 'External Movement' ELSE '' END AS SA_MOVEMENT_GROUPING, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'HA' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'H' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS ACCT, CASE WHEN MAX(CASE WHEN AT_OFFENDER_ALERTS.ALERT_CODE = 'XNR' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_TYPE = 'X' THEN CASE WHEN AT_OFFENDER_ALERTS.ALERT_STATUS = 'ACTIVE' THEN 2 ELSE 1 END ELSE 1 END ELSE 1 END) OVER (PARTITION BY (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID)) = 2 THEN 'Y' ELSE 'N' END AS NFR, AT_OFFENDER_IND_SCHEDULES.EVENT_SUB_TYPE AS SA_ACTIVITY_DESC_ FROM OMS_OWNER.OFFENDERS AT_OFFENDER, OMS_OWNER.OFFENDER_IND_SCHEDULES AT_OFFENDER_IND_SCHEDULES, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_AGENCY_INTERNAL_LOCATION_L4, OMS_OWNER.OFFENDER_BOOKINGS AT_OFFENDER_BOOKING, OMS_OWNER.AGENCY_LOCATIONS AT_OFFENDERS_LOCATIONS, OMS_OWNER.AGENCY_LOCATIONS AT_WING_ESTABLISHMENT, OMS_OWNER.CASELOAD_AGENCY_LOCATIONS AT_CASELOAD_LOCATIONS, OMS_OWNER.V_HEADER_BLOCK AT_HEADER_BLOCK, OMS_OWNER.AGENCY_INTERNAL_LOCATIONS AT_INTERNAL_LOCATIONS_MVTS, OMS_OWNER.OFFENDER_ALERTS AT_OFFENDER_ALERTS, USER_ACCESSIBLE_CASELOADS WING_CASELOAD_SECURITY, OMS_OWNER.LIVING_UNITS AT_LIVING_UNITS WHERE (AT_OFFENDER.OFFENDER_ID = AT_OFFENDER_BOOKING.OFFENDER_ID) AND (AT_OFFENDER_ALERTS.OFFENDER_BOOK_ID (+) = AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID) AND (AT_OFFENDER_BOOKING.LIVING_UNIT_ID = AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_OFFENDER_IND_SCHEDULES.OFFENDER_BOOK_ID) AND (AT_OFFENDERS_LOCATIONS.AGENCY_LOCATION_TYPE = 'INST') AND (AT_OFFENDER_IND_SCHEDULES.TO_INTERNAL_LOCATION_ID = AT_INTERNAL_LOCATIONS_MVTS.INTERNAL_LOCATION_ID (+)) AND (AT_AGENCY_INTERNAL_LOCATION_L4.INTERNAL_LOCATION_ID = AT_LIVING_UNITS.LIVING_UNIT_ID) AND (NOT AT_LIVING_UNITS.HOUSING_UNIT_TYPE IN ('OU', 'REC')) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDER_BOOKING.AGY_LOC_ID) AND (AT_CASELOAD_LOCATIONS.AGY_LOC_ID = AT_OFFENDERS_LOCATIONS.AGY_LOC_ID (+)) AND (NOT AT_CASELOAD_LOCATIONS.AGY_LOC_ID IN ('OUT', 'TRN') AND NOT AT_CASELOAD_LOCATIONS.CASELOAD_ID IN ('ADMINC', 'CADM_I', 'MULTI')) AND (AT_AGENCY_INTERNAL_LOCATION_L4.AGY_LOC_ID = AT_WING_ESTABLISHMENT.AGY_LOC_ID) AND (AT_WING_ESTABLISHMENT.AGY_LOC_ID = WING_CASELOAD_SECURITY.CASELOAD_ID) AND (AT_OFFENDER_BOOKING.OFFENDER_BOOK_ID = AT_HEADER_BLOCK.OFFENDER_BOOK_ID (+)) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND (WING_CASELOAD_SECURITY.USERNAME = UPPER((SELECT username FROM context_ /* = #Variable('BOUSER') */))) AND ((AT_OFFENDER_BOOKING.ACTIVE_FLAG = 'Y') AND (AT_OFFENDERS_LOCATIONS.AGY_LOC_ID = (SELECT ESTABLISHMENT_CODE FROM prompt_ /* = #Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3) */)) AND (AT_LIVING_UNITS.AGY_LOC_ID || '-' || AT_LIVING_UNITS.LEVEL_1_CODE IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */) OR 'All' IN (SELECT WING FROM prompt_ /* = #Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4) */)) AND AT_OFFENDER_IND_SCHEDULES.EVENT_TYPE = 'APP' AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE = (SELECT SCHEDULE_DATE FROM prompt_ /* = #prompt('Schedule Date','D','Scheduled TAPS, Transfers and Appointments\\Event Date',Mono,Free,Not_Persistent,,User:0) */) AND AT_OFFENDER_IND_SCHEDULES.EVENT_DATE >= TRUNC(CURRENT_TIMESTAMP))), dataset_ AS (SELECT LAST_NAME, OFFENDER_ID_DISPLAY, FIRST_NAME, STATUS_2, UNIT_CODE_1, UNIT_DESCRIPTION_4_SHORT, SA_EVENT_TYPE, DESCRIPTION, START_TIME, END_TIME, SA_SLOT, SA_MOVEMENT_GROUPING, ACCT, NFR, SA_ACTIVITY_DESC_, CASE WHEN ACCT = 'N' THEN '-' ELSE 'Y' END AS V_ACCT, CASE WHEN NFR = 'N' THEN '-' ELSE 'Y' END AS V_NFR, CASE WHEN SA_EVENT_TYPE = 'Release' THEN '-' ELSE TO_CHAR(TO_DATE(START_TIME, 'HH:mm')) END AS V_STARTTIME, CASE WHEN SA_EVENT_TYPE = 'TAP' THEN 'Temp Absence/ Home Leave' WHEN SA_EVENT_TYPE = 'TRN' THEN 'Transfer' WHEN SA_EVENT_TYPE = 'APP' THEN 'Appointment' WHEN SA_EVENT_TYPE = 'Prison Activity' THEN 'Activity' ELSE SA_EVENT_TYPE END AS V_MOVEMENTTYPEDESCRIPTION, CASE WHEN SA_EVENT_TYPE IN ('TRN','APP','Release','Hearing','Court') THEN '-' WHEN SA_EVENT_TYPE='TAP' THEN TO_CHAR(TO_DATE(END_TIME, 'DD-MM-YYYY HH24:MI:SS'), 'dd/MM/yyyy HH:MI') ELSE TO_CHAR(TO_DATE(END_TIME,'DD-MM-YYYY HH24:MI:SS'), 'HH:MI') END AS EVENT_END_TIME FROM dataset_base_)",
      "parameters": [
        {
          "index": 0,
          "name": "establishment_code",
          "filterType": "text",
          "reportFieldType": "string",
          "display": "Establishment Code",
          "description": "@Prompt('Establishment Code','A','Establishment\\Establishment Code',mono,free,,Not_Persistent,,User:3)",
          "mandatory": "true"
        },
        {
          "index": 1,
          "name": "wing",
          "filterType": "text",
          "reportFieldType": "string",
          "display": "Wing (All for all)",
          "description": "@Prompt('Wing (All for all)','A','Cell\\Level 1 Living Unit LOV',multi,free,,Not_Persistent,,User:4)",
          "mandatory": "true"
        },
        {
          "index": 2,
          "name": "schedule_date",
          "filterType": "date",
          "reportFieldType": "date",
          "display": "Schedule Date",
          "description": "@prompt('Schedule Date','D','Scheduled Activities\\SA Activity Date',Mono,Free,Not_Persistent,,User:0)",
          "mandatory": "true"
        }
      ],
      "schema": {
        "field": [
          {
            "index": 0,
            "name": "LAST_NAME",
            "type": "string",
            "display": "Last Name",
            "legacyId": "DP7.DO45",
            "legacySqlClass": "column"
          },
          {
            "index": 1,
            "name": "OFFENDER_ID_DISPLAY",
            "type": "string",
            "display": "NOMS Number",
            "legacyId": "DP7.DO44",
            "legacySqlClass": "column"
          },
          {
            "index": 2,
            "name": "FIRST_NAME",
            "type": "string",
            "display": "First Name",
            "legacyId": "DP7.DO46",
            "legacySqlClass": "column"
          },
          {
            "index": 3,
            "name": "STATUS_2",
            "type": "string",
            "display": "Security Category",
            "legacyId": "DP7.DO265",
            "legacySqlClass": "column"
          },
          {
            "index": 4,
            "name": "UNIT_CODE_1",
            "type": "string",
            "display": "Wing",
            "legacyId": "DP7.DO472",
            "legacySqlClass": "column"
          },
          {
            "index": 5,
            "name": "UNIT_DESCRIPTION_4_SHORT",
            "type": "string",
            "display": "Cell Location",
            "legacyId": "DP7.DO427",
            "legacySqlClass": "column"
          },
          {
            "index": 6,
            "name": "SA_EVENT_TYPE",
            "type": "string",
            "display": "SA Event Type",
            "legacyId": "DP7.DOcf2",
            "legacySqlClass": "column"
          },
          {
            "index": 7,
            "name": "DESCRIPTION",
            "type": "string",
            "display": "SA Internal Location",
            "legacyId": "DP7.DOd21",
            "legacySqlClass": "column"
          },
          {
            "index": 8,
            "name": "START_TIME",
            "type": "date",
            "display": "SA Start Time",
            "legacyId": "DP7.DOd22",
            "legacySqlClass": "column"
          },
          {
            "index": 9,
            "name": "END_TIME",
            "type": "date",
            "display": "SA End Time",
            "legacyId": "DP7.DOd23",
            "legacySqlClass": "column"
          },
          {
            "index": 10,
            "name": "SA_SLOT",
            "type": "string",
            "display": "SA Slot",
            "legacyId": "DP7.DOd51",
            "legacySqlClass": "column"
          },
          {
            "index": 11,
            "name": "SA_MOVEMENT_GROUPING",
            "type": "string",
            "display": "SA Movement Grouping",
            "legacyId": "DP7.DOd5e",
            "legacySqlClass": "column"
          },
          {
            "index": 12,
            "name": "ACCT",
            "type": "string",
            "display": "ACCT",
            "legacyId": "DP7.DO585",
            "legacySqlClass": "column"
          },
          {
            "index": 13,
            "name": "NFR",
            "type": "string",
            "display": "NFR",
            "legacyId": "DP7.DOd6d",
            "legacySqlClass": "column"
          },
          {
            "index": 14,
            "name": "SA_ACTIVITY_DESC_",
            "type": "string",
            "display": "SA Activity Desc.",
            "legacyId": "DP7.DOcfa",
            "legacySqlClass": "column"
          },
          {
            "index": 15,
            "name": "V_ACCT",
            "type": "string",
            "display": "V_ACCT",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 16,
            "name": "V_NFR",
            "type": "string",
            "display": "V_NFR",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 17,
            "name": "V_STARTTIME",
            "type": "string",
            "display": "V_STARTTIME",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 18,
            "name": "V_MOVEMENTTYPEDESCRIPTION",
            "type": "string",
            "display": "Movement Type",
            "legacyId": "???",
            "legacySqlClass": "alias"
          },
          {
            "index": 19,
            "name": "EVENT_END_TIME",
            "type": "string",
            "display": "Event End Time",
            "legacyId": "???",
            "legacySqlClass": "alias"
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "access",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": ["${role}", "ROLE_PRISONS_REPORTING_USER"]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "170334.RS",
      "name": "By Wing and Cell",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP7",
      "specification": {
        "template": "list-section",
        "field": [
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Cell Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": true
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_ACCT",
            "display": "ACCT",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_NFR",
            "display": "NFR",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_STARTTIME",
            "display": "Start Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:EVENT_END_TIME",
            "display": "End Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_MOVEMENTTYPEDESCRIPTION",
            "display": "Movement Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "SA Internal Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "165602.RS",
      "name": "By Wing and Time",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP7",
      "specification": {
        "template": "list-section",
        "field": [
          {
            "name": "$ref:V_STARTTIME",
            "display": "Start Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": true
          },
          {
            "name": "$ref:EVENT_END_TIME",
            "display": "End Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_ACCT",
            "display": "ACCT",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_NFR",
            "display": "NFR",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Cell Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_MOVEMENTTYPEDESCRIPTION",
            "display": "Movement Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "SA Internal Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "169865.RS",
      "name": "By Wing, Slot and Destination",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP7",
      "specification": {
        "template": "list-section",
        "field": [
          {
            "name": "$ref:V_STARTTIME",
            "display": "Start Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": true
          },
          {
            "name": "$ref:EVENT_END_TIME",
            "display": "End Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_ACCT",
            "display": "ACCT",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_NFR",
            "display": "NFR",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Cell Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_MOVEMENTTYPEDESCRIPTION",
            "display": "Movement Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:SA_ACTIVITY_DESC_",
            "display": "SA Activity Desc.",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "170425.RS",
      "name": "By Wing and Movement Type",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP7",
      "specification": {
        "template": "list-section",
        "field": [
          {
            "name": "$ref:V_STARTTIME",
            "display": "Start Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": true
          },
          {
            "name": "$ref:EVENT_END_TIME",
            "display": "End Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_ACCT",
            "display": "ACCT",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_NFR",
            "display": "NFR",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Cell Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:DESCRIPTION",
            "display": "SA Internal Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    },
    {
      "id": "169196.RS",
      "name": "By Slot, Destination and Time",
      "classification": "OFFICIAL",
      "version": "1.0.0",
      "render": "HTML",
      "dataset": "3377299/DP7",
      "specification": {
        "template": "list-section",
        "field": [
          {
            "name": "$ref:V_STARTTIME",
            "display": "Start Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": true
          },
          {
            "name": "$ref:EVENT_END_TIME",
            "display": "End Time",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_MOVEMENTTYPEDESCRIPTION",
            "display": "Movement Type",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:SA_ACTIVITY_DESC_",
            "display": "SA Activity Desc.",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:LAST_NAME",
            "display": "Last Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:FIRST_NAME",
            "display": "First Name",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:OFFENDER_ID_DISPLAY",
            "display": "NOMS Number",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:STATUS_2",
            "display": "Security Category",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_ACCT",
            "display": "ACCT",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:V_NFR",
            "display": "NFR",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          },
          {
            "name": "$ref:UNIT_DESCRIPTION_4_SHORT",
            "display": "Cell Location",
            "formula": "",
            "visible": "true",
            "sortable": true,
            "defaultsort": false
          }
        ]
      }
    }
  ]
}
