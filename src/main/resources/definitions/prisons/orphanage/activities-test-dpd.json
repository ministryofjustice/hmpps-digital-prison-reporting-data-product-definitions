{
  "id": "activities-test-dpd",
  "name": "Activities Test",
  "description": "",
  "metadata": {
    "author": "",
    "owner": "",
    "version": "1.0.0"
  },
  "datasource": [
    {
      "id": "activities",
      "name": "activities"
    }
  ],
  "dataset": [
    {
      "id": "test-dataset",
      "name": "Test Dataset",
      "datasource": "activities",
      "query": "select activity_id,prison_code,summary from activity",
      "schema": {
        "field": [
          {
            "name": "activity_id",
            "type": "long",
            "display": ""
          },
          {
            "name": "prison_code",
            "type": "string",
            "display": ""
          },
          {
            "name": "summary",
            "type": "string",
            "display": ""
          }
        ]
      }
    }
  ],
  "policy": [
    {
      "id": "role",
      "type": "access",
      "rule": [
        {
          "effect": "permit",
          "condition": [
            {
              "match": ["${role}", "ROLE_DPR_REPORT_USER"]
            }
          ]
        }
      ]
    }
  ],
  "report": [
    {
      "id": "test-report",
      "name": "Test Report",
      "description": "Report to Test Preview Capability for DPS Databases",
      "classification": "sensitive",
      "version": "v1.0",
      "render": "HTML",
      "dataset": "$ref:test-dataset",
      "specification": {
        "template": "list",
        "field": [
          {
            "name": "$ref:activity_id",
            "display": "ID",
            "formula": "",
            "visible": true,
            "sortable": false,
            "defaultsort": false
          },
          {
            "name": "$ref:prison_code",
            "display": "Establishment",
            "formula": "",
            "visible": true,
            "sortable": false,
            "defaultsort": false
          },
          {
            "name": "$ref:summary",
            "display": "Summary",
            "formula": "",
            "visible": true,
            "sortable": false,
            "defaultsort": false
          }
        ]
      }
    }
  ]
}
